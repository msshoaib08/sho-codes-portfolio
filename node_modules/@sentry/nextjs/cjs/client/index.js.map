{"version":3,"file":"index.js","sources":["../../../src/client/index.ts"],"sourcesContent":["import { addEventProcessor, applySdkMetadata, hasTracingEnabled, setTag } from '@sentry/core';\nimport type { BrowserOptions } from '@sentry/react';\nimport { getDefaultIntegrations as getReactDefaultIntegrations, init as reactInit } from '@sentry/react';\nimport type { EventProcessor, Integration } from '@sentry/types';\nimport { GLOBAL_OBJ } from '@sentry/utils';\n\nimport { devErrorSymbolicationEventProcessor } from '../common/devErrorSymbolicationEventProcessor';\nimport { getVercelEnv } from '../common/getVercelEnv';\nimport { browserTracingIntegration } from './browserTracingIntegration';\nimport { nextjsClientStackFrameNormalizationIntegration } from './clientNormalizationIntegration';\nimport { applyTunnelRouteOption } from './tunnelRoute';\n\nexport * from '@sentry/react';\n\nexport { captureUnderscoreErrorException } from '../common/_error';\n\nconst globalWithInjectedValues = GLOBAL_OBJ as typeof GLOBAL_OBJ & {\n  __rewriteFramesAssetPrefixPath__: string;\n};\n\n// Treeshakable guard to remove all code related to tracing\ndeclare const __SENTRY_TRACING__: boolean;\n\n/** Inits the Sentry NextJS SDK on the browser with the React SDK. */\nexport function init(options: BrowserOptions): void {\n  const opts = {\n    environment: getVercelEnv(true) || process.env.NODE_ENV,\n    defaultIntegrations: getDefaultIntegrations(options),\n    ...options,\n  } satisfies BrowserOptions;\n\n  applyTunnelRouteOption(opts);\n  applySdkMetadata(opts, 'nextjs', ['nextjs', 'react']);\n\n  reactInit(opts);\n\n  setTag('runtime', 'browser');\n  const filterTransactions: EventProcessor = event =>\n    event.type === 'transaction' && event.transaction === '/404' ? null : event;\n  filterTransactions.id = 'NextClient404Filter';\n  addEventProcessor(filterTransactions);\n\n  if (process.env.NODE_ENV === 'development') {\n    addEventProcessor(devErrorSymbolicationEventProcessor);\n  }\n}\n\nfunction getDefaultIntegrations(options: BrowserOptions): Integration[] {\n  const customDefaultIntegrations = getReactDefaultIntegrations(options);\n\n  // This evaluates to true unless __SENTRY_TRACING__ is text-replaced with \"false\", in which case everything inside\n  // will get treeshaken away\n  if (typeof __SENTRY_TRACING__ === 'undefined' || __SENTRY_TRACING__) {\n    if (hasTracingEnabled(options)) {\n      customDefaultIntegrations.push(browserTracingIntegration());\n    }\n  }\n\n  // This value is injected at build time, based on the output directory specified in the build config. Though a default\n  // is set there, we set it here as well, just in case something has gone wrong with the injection.\n  const assetPrefixPath = globalWithInjectedValues.__rewriteFramesAssetPrefixPath__ || '';\n  customDefaultIntegrations.push(nextjsClientStackFrameNormalizationIntegration({ assetPrefixPath }));\n\n  return customDefaultIntegrations;\n}\n\n/**\n * Just a passthrough in case this is imported from the client.\n */\nexport function withSentryConfig<T>(exportedUserNextConfig: T): T {\n  return exportedUserNextConfig;\n}\n\nexport { browserTracingIntegration } from './browserTracingIntegration';\n\nexport * from '../common';\n"],"names":["GLOBAL_OBJ","getVercelEnv","applyTunnelRouteOption","applySdkMetadata","reactInit","setTag","addEventProcessor","devErrorSymbolicationEventProcessor","getReactDefaultIntegrations","hasTracingEnabled","browserTracingIntegration","nextjsClientStackFrameNormalizationIntegration"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAgBA,MAAM,wBAAA,GAA2BA,gBAAW;;AAE5C,CAAA;AACA;AACA;;AAGA;AACO,SAAS,IAAI,CAAC,OAAO,EAAwB;AACpD,EAAE,MAAM,OAAO;AACf,IAAI,WAAW,EAAEC,yBAAY,CAAC,IAAI,CAAE,IAAG,OAAO,CAAC,GAAG,CAAC,QAAQ;AAC3D,IAAI,mBAAmB,EAAE,sBAAsB,CAAC,OAAO,CAAC;AACxD,IAAI,GAAG,OAAO;AACd,GAAI,EAAA;AACJ;AACA,EAAEC,kCAAsB,CAAC,IAAI,CAAC,CAAA;AAC9B,EAAEC,qBAAgB,CAAC,IAAI,EAAE,QAAQ,EAAE,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC,CAAA;AACvD;AACA,EAAEC,UAAS,CAAC,IAAI,CAAC,CAAA;AACjB;AACA,EAAEC,WAAM,CAAC,SAAS,EAAE,SAAS,CAAC,CAAA;AAC9B,EAAE,MAAM,kBAAkB,GAAmB,KAAM;AACnD,IAAI,KAAK,CAAC,IAAK,KAAI,iBAAiB,KAAK,CAAC,WAAA,KAAgB,MAAA,GAAS,IAAA,GAAO,KAAK,CAAA;AAC/E,EAAE,kBAAkB,CAAC,EAAG,GAAE,qBAAqB,CAAA;AAC/C,EAAEC,sBAAiB,CAAC,kBAAkB,CAAC,CAAA;AACvC;AACA,EAAE,IAAI,OAAO,CAAC,GAAG,CAAC,QAAA,KAAa,aAAa,EAAE;AAC9C,IAAIA,sBAAiB,CAACC,uEAAmC,CAAC,CAAA;AAC1D,GAAE;AACF,CAAA;AACA;AACA,SAAS,sBAAsB,CAAC,OAAO,EAAiC;AACxE,EAAE,MAAM,yBAA0B,GAAEC,4BAA2B,CAAC,OAAO,CAAC,CAAA;AACxE;AACA;AACA;AACA,EAAE,IAAI,OAAO,kBAAA,KAAuB,WAAY,IAAG,kBAAkB,EAAE;AACvE,IAAI,IAAIC,sBAAiB,CAAC,OAAO,CAAC,EAAE;AACpC,MAAM,yBAAyB,CAAC,IAAI,CAACC,mDAAyB,EAAE,CAAC,CAAA;AACjE,KAAI;AACJ,GAAE;AACF;AACA;AACA;AACA,EAAE,MAAM,eAAgB,GAAE,wBAAwB,CAAC,gCAAA,IAAoC,EAAE,CAAA;AACzF,EAAE,yBAAyB,CAAC,IAAI,CAACC,6EAA8C,CAAC,EAAE,eAAA,EAAiB,CAAC,CAAC,CAAA;AACrG;AACA,EAAE,OAAO,yBAAyB,CAAA;AAClC,CAAA;AACA;AACA;AACA;AACA;AACO,SAAS,gBAAgB,CAAI,sBAAsB,EAAQ;AAClE,EAAE,OAAO,sBAAsB,CAAA;AAC/B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}