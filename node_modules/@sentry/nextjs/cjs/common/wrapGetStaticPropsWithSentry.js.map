{"version":3,"file":"wrapGetStaticPropsWithSentry.js","sources":["../../../src/common/wrapGetStaticPropsWithSentry.ts"],"sourcesContent":["import type { GetStaticProps } from 'next';\n\nimport { isBuild } from './utils/isBuild';\nimport { callDataFetcherTraced, withErrorInstrumentation } from './utils/wrapperUtils';\n\ntype Props = { [key: string]: unknown };\n\n/**\n * Create a wrapped version of the user's exported `getStaticProps` function\n *\n * @param origGetStaticProps The user's `getStaticProps` function\n * @param parameterizedRoute The page's parameterized route\n * @returns A wrapped version of the function\n */\nexport function wrapGetStaticPropsWithSentry(\n  origGetStaticPropsa: GetStaticProps<Props>,\n  parameterizedRoute: string,\n): GetStaticProps<Props> {\n  return new Proxy(origGetStaticPropsa, {\n    apply: (wrappingTarget, thisArg, args: Parameters<GetStaticProps<Props>>) => {\n      if (isBuild()) {\n        return wrappingTarget.apply(thisArg, args);\n      }\n\n      const errorWrappedGetStaticProps = withErrorInstrumentation(wrappingTarget);\n      return callDataFetcherTraced(errorWrappedGetStaticProps, args, {\n        parameterizedRoute,\n        dataFetchingMethodName: 'getStaticProps',\n      });\n\n      return errorWrappedGetStaticProps.apply(thisArg, args);\n    },\n  });\n}\n"],"names":["isBuild","withErrorInstrumentation","callDataFetcherTraced"],"mappings":";;;;;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAAS,4BAA4B;AAC5C,EAAE,mBAAmB;AACrB,EAAE,kBAAkB;AACpB,EAAyB;AACzB,EAAE,OAAO,IAAI,KAAK,CAAC,mBAAmB,EAAE;AACxC,IAAI,KAAK,EAAE,CAAC,cAAc,EAAE,OAAO,EAAE,IAAI,KAAwC;AACjF,MAAM,IAAIA,eAAO,EAAE,EAAE;AACrB,QAAQ,OAAO,cAAc,CAAC,KAAK,CAAC,OAAO,EAAE,IAAI,CAAC,CAAA;AAClD,OAAM;AACN;AACA,MAAM,MAAM,0BAA2B,GAAEC,qCAAwB,CAAC,cAAc,CAAC,CAAA;AACjF,MAAM,OAAOC,kCAAqB,CAAC,0BAA0B,EAAE,IAAI,EAAE;AACrE,QAAQ,kBAAkB;AAC1B,QAAQ,sBAAsB,EAAE,gBAAgB;AAChD,OAAO,CAAC,CAAA;AAGR,KAAK;AACL,GAAG,CAAC,CAAA;AACJ;;;;"}