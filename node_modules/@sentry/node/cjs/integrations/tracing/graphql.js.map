{"version":3,"file":"graphql.js","sources":["../../../../src/integrations/tracing/graphql.ts"],"sourcesContent":["import { GraphQLInstrumentation } from '@opentelemetry/instrumentation-graphql';\nimport { defineIntegration } from '@sentry/core';\nimport { addOpenTelemetryInstrumentation } from '@sentry/opentelemetry';\nimport type { IntegrationFn } from '@sentry/types';\n\nimport { addOriginToSpan } from '../../utils/addOriginToSpan';\n\ninterface GraphqlOptions {\n  /** Do not create spans for resolvers. */\n  ignoreResolveSpans?: boolean;\n\n  /**\n   * Don't create spans for the execution of the default resolver on object properties.\n   *\n   * When a resolver function is not defined on the schema for a field, graphql will\n   * use the default resolver which just looks for a property with that name on the object.\n   * If the property is not a function, it's not very interesting to trace.\n   * This option can reduce noise and number of spans created.\n   */\n  ignoreTrivalResolveSpans?: boolean;\n}\n\nconst _graphqlIntegration = ((_options: GraphqlOptions = {}) => {\n  const options = {\n    ignoreResolveSpans: true,\n    ignoreTrivialResolveSpans: true,\n    ..._options,\n  };\n\n  return {\n    name: 'Graphql',\n    setupOnce() {\n      addOpenTelemetryInstrumentation(\n        new GraphQLInstrumentation({\n          ...options,\n          responseHook(span) {\n            addOriginToSpan(span, 'auto.graphql.otel.graphql');\n          },\n        }),\n      );\n    },\n  };\n}) satisfies IntegrationFn;\n\n/**\n * GraphQL integration\n *\n * Capture tracing data for GraphQL.\n */\nexport const graphqlIntegration = defineIntegration(_graphqlIntegration);\n"],"names":["addOpenTelemetryInstrumentation","GraphQLInstrumentation","addOriginToSpan","defineIntegration"],"mappings":";;;;;;;AAsBA,MAAM,mBAAA,IAAuB,CAAC,QAAQ,GAAmB,EAAE,KAAK;AAChE,EAAE,MAAM,UAAU;AAClB,IAAI,kBAAkB,EAAE,IAAI;AAC5B,IAAI,yBAAyB,EAAE,IAAI;AACnC,IAAI,GAAG,QAAQ;AACf,GAAG,CAAA;AACH;AACA,EAAE,OAAO;AACT,IAAI,IAAI,EAAE,SAAS;AACnB,IAAI,SAAS,GAAG;AAChB,MAAMA,6CAA+B;AACrC,QAAQ,IAAIC,6CAAsB,CAAC;AACnC,UAAU,GAAG,OAAO;AACpB,UAAU,YAAY,CAAC,IAAI,EAAE;AAC7B,YAAYC,+BAAe,CAAC,IAAI,EAAE,2BAA2B,CAAC,CAAA;AAC9D,WAAW;AACX,SAAS,CAAC;AACV,OAAO,CAAA;AACP,KAAK;AACL,GAAG,CAAA;AACH,CAAC,CAAE,EAAA;AACH;AACA;AACA;AACA;AACA;AACA;MACa,kBAAmB,GAAEC,sBAAiB,CAAC,mBAAmB;;;;"}