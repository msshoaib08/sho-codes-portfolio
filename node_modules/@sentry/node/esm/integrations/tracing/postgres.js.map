{"version":3,"file":"postgres.js","sources":["../../../../src/integrations/tracing/postgres.ts"],"sourcesContent":["import { PgInstrumentation } from '@opentelemetry/instrumentation-pg';\nimport { defineIntegration } from '@sentry/core';\nimport { addOpenTelemetryInstrumentation } from '@sentry/opentelemetry';\nimport type { IntegrationFn } from '@sentry/types';\n\nimport { addOriginToSpan } from '../../utils/addOriginToSpan';\n\nconst _postgresIntegration = (() => {\n  return {\n    name: 'Postgres',\n    setupOnce() {\n      addOpenTelemetryInstrumentation(\n        new PgInstrumentation({\n          requireParentSpan: true,\n          requestHook(span) {\n            addOriginToSpan(span, 'auto.db.otel.postgres');\n          },\n        }),\n      );\n    },\n  };\n}) satisfies IntegrationFn;\n\n/**\n * Postgres integration\n *\n * Capture tracing data for pg.\n */\nexport const postgresIntegration = defineIntegration(_postgresIntegration);\n"],"names":[],"mappings":";;;;;AAOA,MAAM,oBAAqB,IAAG,MAAM;AACpC,EAAE,OAAO;AACT,IAAI,IAAI,EAAE,UAAU;AACpB,IAAI,SAAS,GAAG;AAChB,MAAM,+BAA+B;AACrC,QAAQ,IAAI,iBAAiB,CAAC;AAC9B,UAAU,iBAAiB,EAAE,IAAI;AACjC,UAAU,WAAW,CAAC,IAAI,EAAE;AAC5B,YAAY,eAAe,CAAC,IAAI,EAAE,uBAAuB,CAAC,CAAA;AAC1D,WAAW;AACX,SAAS,CAAC;AACV,OAAO,CAAA;AACP,KAAK;AACL,GAAG,CAAA;AACH,CAAC,CAAE,EAAA;AACH;AACA;AACA;AACA;AACA;AACA;MACa,mBAAoB,GAAE,iBAAiB,CAAC,oBAAoB;;;;"}